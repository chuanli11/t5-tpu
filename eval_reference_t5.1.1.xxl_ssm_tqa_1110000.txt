WARNING:tensorflow:From /usr/local/lib/python3.7/dist-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
INFO:tensorflow:Loading NQ from cache.
2020-07-07 05:45:46.039427: I tensorflow/core/platform/cpu_feature_guard.cc:143] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2020-07-07 05:45:46.044927: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 2300000000 Hz
2020-07-07 05:45:46.045123: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7d5dae0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-07-07 05:45:46.045149: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
2020-07-07 05:45:47.033390: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:301] Initialize GrpcChannelCache for job worker -> {0 -> 10.240.1.2:8470}
2020-07-07 05:45:47.033439: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:301] Initialize GrpcChannelCache for job localhost -> {0 -> localhost:34258}
2020-07-07 05:45:47.051807: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:301] Initialize GrpcChannelCache for job worker -> {0 -> 10.240.1.2:8470}
2020-07-07 05:45:47.051855: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:301] Initialize GrpcChannelCache for job localhost -> {0 -> localhost:34258}
2020-07-07 05:45:47.052439: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:390] Started server with target: grpc://localhost:34258
2020-07-07 05:45:47.863284: W tensorflow/core/kernels/data/cache_dataset_ops.cc:794] The calling iterator did not fully read the dataset being cached. In order to avoid unexpected truncation of the dataset, the partially cached contents of the dataset will be discarded. This can happen if you have an input pipeline similar to `dataset.cache().take(k).repeat()`. You should use `dataset.take(k).cache().repeat()` instead.
INFO:absl:Load dataset info from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:absl:Reusing dataset trivia_qa (gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0)
INFO:absl:Constructing tf.data.Dataset for split None, from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:absl:Load dataset info from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:absl:Reusing dataset trivia_qa (gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0)
INFO:absl:Constructing tf.data.Dataset for split validation, from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:absl:Load dataset info from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:tensorflow:Using config: {'_model_dir': 'gs://t5-tutorial-storage/reference/t5.1.1.xxl_ssm_tqa', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': None, '_session_config': allow_soft_placement: true
cluster_def {
  job {
    name: "worker"
    tasks {
      key: 0
      value: "10.240.1.2:8470"
    }
  }
}
isolate_session_state: true
, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': None, '_train_distribute': None, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_experimental_max_worker_delay_secs': None, '_session_creation_timeout_secs': 7200, '_service': None, '_cluster_spec': ClusterSpec({'worker': ['10.240.1.2:8470']}), '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': 'grpc://10.240.1.2:8470', '_evaluation_master': 'grpc://10.240.1.2:8470', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_tpu_config': TPUConfig(iterations_per_loop=100, num_shards=None, num_cores_per_replica=1, per_host_input_for_training=4, tpu_job_name=None, initial_infeed_sleep_secs=None, input_partition_dims=None, eval_training_input_configuration=2, experimental_host_call_every_n_steps=1), '_cluster': <tensorflow.python.distribute.cluster_resolver.tpu_cluster_resolver.TPUClusterResolver object at 0x7fcb482e5e48>}
INFO:tensorflow:_TPUContext: eval_on_tpu True
INFO:absl:Load dataset info from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
INFO:absl:Reusing dataset trivia_qa (gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0)
INFO:absl:Constructing tf.data.Dataset for split validation, from gs://t5-tutorial-storage/data/trivia_qa/unfiltered.nocontext/1.1.0
Setting up GCS access...
Running on TPU: grpc://10.240.1.2:8470
A few raw validation examples...
{'question': b'what do the 3 dots mean in math?', 'answer': b'the therefore sign (\xe2\x88\xb4) is generally used before a logical consequence, such as the conclusion of a syllogism'}
{'question': b'who is playing the halftime show at super bowl 2016?', 'answer': b'Coldplay with special guest performers Beyonc\xc3\xa9 and Bruno Mars'}
{'question': b'who won the 2017 sports personality of the year?', 'answer': b'Mo Farah'}
{'question': b'where was the world economic forum held this year?', 'answer': b'Davos, a mountain resort in Graub\xc3\xbcnden, in the eastern Alps region of Switzerland'}
{'question': b'who has made the most premier league appearances?', 'answer': b'Gareth Barry'}
A few preprocessed validation examples...
{'inputs_plaintext': b'trivia question: how many stores does lowes have in canada?', 'inputs': array([22377,   822,    10,   149,   186,  3253,   405,   731,    15,
           7,    43,    16, 19343,    58,     1]), 'targets_plaintext': b'62', 'targets': array([   3, 4056,    1])}
{'inputs_plaintext': b'trivia question: who heads the executive department of west virginia government?', 'inputs': array([22377,   822,    10,   113,  7701,     8,  4297,  3066,    13,
        4653, 24556,    23,     9,   789,    58,     1]), 'targets_plaintext': b'jim justice', 'targets': array([   3,  354,  603, 4831,    1])}
{'inputs_plaintext': b'trivia question: who conducted the opening concert at carnegie hall?', 'inputs': array([22377,   822,    10,   113,  4468,     8,  2101,  4219,    44,
       15460,  4044,  6358,    58,     1]), 'targets_plaintext': b'maestro walter damrosch and great russian composer pyotr ilyich tchaikovsky', 'targets': array([31544,    32,     3,   210,  8818, 10157,  1859,   524,    11,
         248,     3, 26165,    29, 13075,     3,   102,    63,    32,
          17,    52,     3,  9203,   362,     3,    17,  3441,    23,
        9789,  5352,     1])}
{'inputs_plaintext': b'trivia question: when does the cannes film festival take place?', 'inputs': array([22377,   822,    10,   116,   405,     8,    54,  1496,   814,
        3994,   240,   286,    58,     1]), 'targets_plaintext': b'usually in may', 'targets': array([1086,   16,  164,    1])}
{'inputs_plaintext': b"trivia question: what is the supreme court's major power?", 'inputs': array([22377,   822,    10,   125,    19,     8, 15859,    15,  1614,
          31,     7,   779,   579,    58,     1]), 'targets_plaintext': b'ultimate (and largely discretionary) appellate jurisdiction over all federal courts and state court cases involving issues of federal law plus original jurisdiction over a small range of cases', 'targets': array([ 5737,    41,   232,     3,  6974, 12962,  1208,    61,  8319,
        5867, 10185,   147,    66,  2822,  8773,    11,   538,  1614,
        1488,     3,  6475,   807,    13,  2822,   973,   303,   926,
       10185,   147,     3,     9,     1])}
A few raw validation examples...
{'answer': {'aliases': array([b'Torquemada (disambiguation)', b'Torquemada'], dtype=object), 'matched_wiki_entity_name': b'', 'normalized_aliases': array([b'torquemada', b'torquemada disambiguation'], dtype=object), 'normalized_matched_wiki_entity_name': b'', 'normalized_value': b'torquemada', 'type': b'WikipediaEntity', 'value': b'Torquemada'}, 'entity_pages': {'doc_source': array([], dtype=object), 'filename': array([], dtype=object), 'title': array([], dtype=object), 'wiki_context': array([], dtype=object)}, 'question': b'In 1483, who was appointed the first grand inquisitor of the Spanish Inquisition?', 'question_id': b'qw_16011', 'question_source': b'http://www.quizwise.com/', 'search_results': {'description': array([], dtype=object), 'filename': array([], dtype=object), 'rank': array([], dtype=int32), 'search_context': array([], dtype=object), 'title': array([], dtype=object), 'url': array([], dtype=object)}}
{'answer': {'aliases': array([b'Austerlitz (disambiguation)', b'Austerlitz', b'AUSTERLITZ'],
      dtype=object), 'matched_wiki_entity_name': b'', 'normalized_aliases': array([b'austerlitz', b'austerlitz disambiguation'], dtype=object), 'normalized_matched_wiki_entity_name': b'', 'normalized_value': b'austerlitz', 'type': b'WikipediaEntity', 'value': b'AUSTERLITZ'}, 'entity_pages': {'doc_source': array([], dtype=object), 'filename': array([], dtype=object), 'title': array([], dtype=object), 'wiki_context': array([], dtype=object)}, 'question': b'Which celebrated battle was fought near Brno on 2nd December 1805?', 'question_id': b'dpql_4053', 'question_source': b'https://derbyshirepubquizleague.wordpress.com/', 'search_results': {'description': array([], dtype=object), 'filename': array([], dtype=object), 'rank': array([], dtype=int32), 'search_context': array([], dtype=object), 'title': array([], dtype=object), 'url': array([], dtype=object)}}
A few preprocessed validation examples...
{'inputs_plaintext': b'trivia question: the drummer of which band was the winner of the 2011 uk television show \xe2\x80\x98strictly come dancing\xe2\x80\x99?', 'inputs': array([22377,   822,    10,     8, 26726,    13,    84,  1928,    47,
           8,  4668,    13,     8,  2722,     3,  1598,  4390,   504,
         458, 20066,   120,   369, 10410,    22,    58,     1]), 'targets_plaintext': b'mcfly (harry judd)', 'targets': array([    3,    51,    75,    89,   120,    41,  3272,   651,     3,
       14312,    26,    61,     1])}
{'inputs_plaintext': b'trivia question: which musical instrument has an italian name fagotto which means a bundle of sticks?', 'inputs': array([22377,   822,    10,    84,  4183,  5009,    65,    46, 24168,
         564,     3,    89,     9, 10779,   235,    84,   598,     3,
           9, 12927,    13, 16752,    58,     1]), 'targets_plaintext': b'bassoon', 'targets': array([7981,   32,  106,    1])}
{'inputs_plaintext': b'trivia question: which american naval destroyer was attacked in aden in october 2000?', 'inputs': array([22377,   822,    10,    84, 10211, 25105, 10123,    49,    47,
       17263,    16,     3,     9,   537,    16,     3,    32,    75,
         235,  1152,  2766,    58,     1]), 'targets_plaintext': b'u.s.s. cole', 'targets': array([   3,   76,    5,    7,    5,    7,    5, 7632,   15,    1])}
